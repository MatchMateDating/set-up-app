@use "sass:math";
@use "sass:string";


$gradient: ();

@for $i from 1 to 40 {
  /* Sass version doesn't accept two arguments?
  @function rand($min, $max) { @return random($max - $min) + $min;} */
  // random angle between 30 and 180
  $degrees: (math.random(151) + 29) * 1deg;

  // random start between 1â€“100
  $start: math.random(100);

  // random end at least 1 more than start, up to +20
  $end: $start + math.random(20);


  $gradient: join(
    $gradient,
    linear-gradient($degrees, 
      #000000 #{$start}#{string.unquote("%")},
      #fff #{$end}#{string.unquote("%")}),
    comma
    );
}

.format-constitution {
  font-family: 'Pinyon Script', cursive, 'Times New Roman', serif;
  position: relative;
  clip-path: polygon(
    /* top edge */
    0% 0%,
    2% .5%,
    14% 1%,
    18% 0.5%,
    22% 1.1%,
    26% 0.7%,
    42% 1.3%,
    48% 0.4%,
    54% 1.2%,
    60% 0.5%,
    66% .1%,
    78% 1.2%,
    84% 0.4%,
    96% 0.4%,
    100% 0%,

    /* right edge */
    100% 4%,
    99% 8%,
    100% 12%,
    100% 20%,
    99% 24%,
    100% 28%,
    99% 32%,
    100% 44%,
    99% 48%,
    100% 52%,
    99% 56%,
    100% 60%,
    99% 64%,
    99% 72%,
    100% 76%,
    99% 80%,
    100% 84%,
    99% 96%,
    100% 100%,

    /* bottom edge */
    96% 99%,
    92% 100%,
    88% 99%,
    84% 100%,
    68% 100%,
    64% 99.2%,
    60% 100%,
    56% 99.3%,
    52% 100%,
    48% 99%,
    40% 99.8%,
    36% 100%,
    32% 99%,
    24% 99%,
    12% 100%,
    8% 99.5%,
    4% 100%,
    0% 100%,

    /* left edge */
    1.4% 96%,
    0% 92%,
    .3% 80%,
    0% 76%,
    .1% 72%,
    0% 60%,
    .1% 56%,
    0% 52%,
    .6% 48%,
    0% 44%,
    1% 40%,
    0% 36%,
    1% 32%,
    0% 28%,
    .2% 24%,
    0% 20%,
    .1% 16%,
    0.6% 12%,
    .4% 8%,
    0% 4%
  );

  z-index: 0;

  background: radial-gradient(circle, #fdf5d9 60%, #e9d8a6 90%, #d4a373 100%);
  box-shadow: inset 0 0 60px rgba(0, 0, 0, 0.4); // darkens edges inside
  
  &::before,
  &::after {
    background: $gradient;
    background-blend-mode: difference;
    content: '';
    display: block;
    position: absolute;
    top: 0; right: 0; bottom: 0; left: 0;
    z-index: -2;
  }
  
  &::after {
    // Invert the second layer and offset
    filter: invert(1);
    opacity: 0.5;
    top: 1px;
  }

   &::before {
    position: absolute;
    inset: 0;
    background: hsla(40, 100%, 72%, 0.712);
    z-index: -1; // above gradients, below content
    mix-blend-mode: normal;
  }
}